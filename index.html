<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Case of the Missing Cookies</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400..900;1,400..900&display=swap" rel="stylesheet">
    <style>
        body {
            background: #2c3e50; /* 어두운 파란색 배경 */
            color: #ecf0f1;
            font-family: 'Playfair Display', serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }
        .parchment-container {
            background-color: #f4f1e4;
            color: #4b4b4b;
            border: 5px solid #8b7d6b;
            padding: 2rem;
            max-width: 900px;
            width: 100%;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.3);
            text-align: center;
        }
        .clue-image {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            margin: 1.5rem auto;
            max-height: 250px;
        }
        .question-box {
            background-color: #e0d7c7;
            padding: 1.5rem;
            border-radius: 8px;
            margin-top: 1.5rem;
            border: 2px dashed #a1978a;
        }
        .input-text {
            width: 100%;
            padding: 0.75rem;
            border-radius: 6px;
            border: 1px solid #ccc;
            margin-top: 0.5rem;
            font-family: 'Playfair Display', serif;
            color: #4b4b4b;
        }
        .btn {
            background-color: #c0392b;
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 6px;
            transition: transform 0.2s, background-color 0.2s;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .btn:hover {
            background-color: #e74c3c;
            transform: translateY(-2px);
        }
        #feedback-message {
            margin-top: 1rem;
            font-weight: bold;
        }
        .success {
            color: #27ae60;
        }
        .error {
            color: #c0392b;
        }
    </style>
    <!--
        주의사항:
        - 모든 JS 변수/함수는 snake_case로 작성했습니다.
        - 각 로직 블록에 한국어 주석을 추가했습니다.
    -->
    
</head>
<body class="bg-gray-900 text-white flex items-center justify-center min-h-screen p-6">
    <div class="parchment-container">
        <!-- 메인 게임 컨테이너 -->
        <div id="game-container">

            <!-- 인트로 화면 -->
            <div id="mission-intro" class="mission-section">
                <h1 class="text-4xl font-bold mb-4">The Case of the Missing Cookies</h1>
                <p class="text-lg mb-6">Welcome, junior detectives! A terrible crime has been committed. A giant jar of delicious chocolate chip cookies has been stolen from Mrs. Baker's famous bakery. The thief has locked the cookies in a magical "Cookie Jar of Truth." To unlock it, you must use your detective skills and the power of the <strong>'It is/was... that'</strong> grammar structure. The fate of the cookies is in your hands!</p>
                <button id="start-mission-btn" class="btn text-xl font-bold">Start Your Investigation</button>
            </div>

            <!-- 미션 1: 용의자 진술 -->
            <div id="mission-1" class="mission-section hidden">
                <h2 class="text-3xl font-bold mb-4">Mission 1: The Suspects' Statements</h2>
                <div class="text-left mb-6 leading-relaxed">
                    <p class="mb-4">Read the statements from the three suspects. Use them to answer the first question.</p>
                    <div class="question-box">
                        <p class="font-bold">Tim, the delivery boy:</p>
                        <p class="italic">"I was delivering bread to the bakery. I saw the jar of cookies on the counter, but it wasn't me that took them!"</p>
                    </div>
                    <div class="question-box mt-4">
                        <p class="font-bold">Lisa, the new cashier:</p>
                        <p class="italic">"I was cleaning the floor behind the counter. It was the delivery boy that was standing near the cookies!"</p>
                    </div>
                    <div class="question-box mt-4">
                        <p class="font-bold">Mr. Jones, a customer:</p>
                        <p class="italic">"I came in to buy a loaf of bread. It was the new cashier that I saw putting something in her bag!"</p>
                    </div>
                </div>
                <div class="question-box">
                    <p class="font-bold">Question 1: Who did Lisa say was standing near the cookies?</p>
                    <p class="mb-2">Start your answer with "It was... that..."</p>
                    <input type="text" id="q1-input" class="input-text" placeholder="It was... that...">
                    <button id="submit-q1-btn" class="btn mt-4 w-full">Submit Answer</button>
                    <p id="q1-feedback" class="feedback-message mt-2"></p>
                </div>
            </div>

            <!-- 미션 2: 목격자 찾기 -->
            <div id="mission-2" class="mission-section hidden">
                <h2 class="text-3xl font-bold mb-4">Mission 2: Finding the Witness</h2>
                <div class="text-left mb-6 leading-relaxed">
                    <p class="mb-4">Read the statements from the three suspects. Use them to answer the next question.</p>
                    <div class="question-box">
                        <p class="font-bold">Tim, the delivery boy:</p>
                        <p class="italic">"I was delivering bread to the bakery. I saw the jar of cookies on the counter, but it wasn't me that took them!"</p>
                    </div>
                    <div class="question-box mt-4">
                        <p class="font-bold">Lisa, the new cashier:</p>
                        <p class="italic">"I was cleaning the floor behind the counter. It was the delivery boy that was standing near the cookies!"</p>
                    </div>
                    <div class="question-box mt-4">
                        <p class="font-bold">Mr. Jones, a customer:</p>
                        <p class="italic">"I came in to buy a loaf of bread. It was the new cashier that I saw putting something in her bag!"</p>
                    </div>
                </div>
                <p class="mb-4">Mr. Jones saw something important. Use his statement to answer the next question.</p>
                <div class="question-box">
                    <p class="font-bold">Question 2: Who did Mr. Jones see putting something in her bag?</p>
                    <p class="mb-2">Start your answer with "It was... that..."</p>
                    <input type="text" id="q2-input" class="input-text" placeholder="It was... that...">
                    <button id="submit-q2-btn" class="btn mt-4 w-full">Submit Answer</button>
                    <p id="q2-feedback" class="feedback-message mt-2"></p>
                </div>
            </div>

            <!-- 미션 3: 가장 큰 단서 -->
            <div id="mission-3" class="mission-section hidden">
                <h2 class="text-3xl font-bold mb-4">Mission 3: The Biggest Clue</h2>
                 <div class="text-left mb-6 leading-relaxed">
                    <p class="mb-4">Read the statements from the three suspects. Use them to answer the next question.</p>
                    <div class="question-box">
                        <p class="font-bold">Tim, the delivery boy:</p>
                        <p class="italic">"I was delivering bread to the bakery. I saw the jar of cookies on the counter, but it wasn't me that took them!"</p>
                    </div>
                    <div class="question-box mt-4">
                        <p class="font-bold">Lisa, the new cashier:</p>
                        <p class="italic">"I was cleaning the floor behind the counter. It was the delivery boy that was standing near the cookies!"</p>
                    </div>
                    <div class="question-box mt-4">
                        <p class="font-bold">Mr. Jones, a customer:</p>
                        <p class="italic">"I came in to buy a loaf of bread. It was the new cashier that I saw putting something in her bag!"</p>
                    </div>
                </div>
                <p class="mb-4">All good detectives look for lies. Think about what the cashier, Lisa, said. What is the biggest clue in her statement?</p>
                <div class="question-box">
                    <p class="font-bold">Question 3: Read the story again. What is the biggest clue?</p>
                    <p class="mb-2">Explain in a short sentence.</p>
                    <textarea id="q3-input" class="input-text h-24" placeholder="Think about where Lisa was and what she said she saw."></textarea>
                    <button id="submit-q3-btn" class="btn mt-4 w-full">Submit Answer</button>
                    <p id="q3-feedback" class="feedback-message mt-2"></p>
                </div>
            </div>

            <!-- 미션 4: 최종 결론 -->
            <div id="mission-4" class="mission-section hidden">
                <h2 class="text-3xl font-bold mb-4">Mission 4: The Final Reveal</h2>
                <div class="text-left mb-6 leading-relaxed">
                    <p class="mb-4">Read the statements from the three suspects. Use them to answer the next question.</p>
                    <div class="question-box">
                        <p class="font-bold">Tim, the delivery boy:</p>
                        <p class="italic">"I was delivering bread to the bakery. I saw the jar of cookies on the counter, but it wasn't me that took them!"</p>
                    </div>
                    <div class="question-box mt-4">
                        <p class="font-bold">Lisa, the new cashier:</p>
                        <p class="italic">"I was cleaning the floor behind the counter. It was the delivery boy that was standing near the cookies!"</p>
                    </div>
                    <div class="question-box mt-4">
                        <p class="font-bold">Mr. Jones, a customer:</p>
                        <p class="italic">"I came in to buy a loaf of bread. It was the new cashier that I saw putting something in her bag!"</p>
                    </div>
                </div>
                <p class="mb-4">You have all the clues. Now, use your final piece of evidence to unlock the truth!</p>
                <div class="question-box">
                    <p class="font-bold">Question 4: So, who is the cookie thief? Why?</p>
                    <p class="mb-2">Choose the thief and then use a sentence that starts with <strong>"It was... that..."</strong> to explain your answer.</p>
                    <select id="q4-suspect" class="input-text">
                        <option value="">Choose the thief...</option>
                        <option value="Tim">Tim, the delivery boy</option>
                        <option value="Lisa">Lisa, the new cashier</option>
                        <option value="Mr. Jones">Mr. Jones, a customer</option>
                    </select>
                    <input type="text" id="q4-reason" class="input-text mt-4" placeholder="It was... that...">
                    <button id="submit-q4-btn" class="btn mt-4 w-full">Submit Answer</button>
                    <p id="q4-feedback" class="feedback-message mt-2"></p>
                </div>
            </div>

            <!-- 성공 화면 -->
            <div id="mission-success" class="mission-section hidden text-center">
                <h2 class="text-4xl font-bold text-green-700 mb-4">Congratulations! Case Solved!</h2>
                <p class="text-lg mb-6">You've unlocked the Cookie Jar of Truth! It was your logical thinking and your excellent use of the <strong>'It was... that...'</strong> structure that solved the case. The cookies are safe!</p>
                <button id="restart-btn" class="btn mt-6">Restart Investigation</button>
            </div>
        </div>
    </div>

    <script>
        // ==========================
        // DOM 요소 참조 (snake_case)
        // ==========================
        const game_container = document.getElementById('game-container');
        const start_btn = document.getElementById('start-mission-btn');
        const mission_sections = document.querySelectorAll('.mission-section');
        const q1_input = document.getElementById('q1-input');
        const q1_btn = document.getElementById('submit-q1-btn');
        const q1_feedback = document.getElementById('q1-feedback');
        const q2_input = document.getElementById('q2-input');
        const q2_btn = document.getElementById('submit-q2-btn');
        const q2_feedback = document.getElementById('q2-feedback');
        const q3_input = document.getElementById('q3-input');
        const q3_btn = document.getElementById('submit-q3-btn');
        const q3_feedback = document.getElementById('q3-feedback');
        const q4_suspect = document.getElementById('q4-suspect');
        const q4_reason = document.getElementById('q4-reason');
        const q4_btn = document.getElementById('submit-q4-btn');
        const q4_feedback = document.getElementById('q4-feedback');
        const restart_btn = document.getElementById('restart-btn');

        // 현재 미션 인덱스 (0 = 인트로)
        let current_mission = 0;

        // ==========================
        // 유틸 함수: 특정 미션만 표시
        // ==========================
        /**
         * 특정 미션 섹션만 표시하고 나머지는 숨깁니다.
         * @param {number} mission_number - 표시할 미션 번호 (0=인트로, 1~)
         */
        function show_mission(mission_number) {
            mission_sections.forEach((mission, index) => {
                mission.classList.add('hidden');
                if (index === mission_number) {
                    mission.classList.remove('hidden');
                }
            });
            current_mission = mission_number;
        }

        // ==========================
        // 인트로: 시작 버튼 이벤트
        // ==========================
        start_btn.addEventListener('click', () => {
            show_mission(1);
        });

        // ==========================
        // 미션 1: 정답 검사
        // 요구: "It was ... that ...", "the delivery boy" 포함
        // ==========================
        q1_btn.addEventListener('click', () => {
            const user_answer = q1_input.value.trim().toLowerCase();
            if (user_answer.includes('it was') && user_answer.includes('the delivery boy') && user_answer.includes('that')) {
                q1_feedback.textContent = 'Correct! A clue has been unlocked.';
                q1_feedback.className = 'feedback-message success mt-2';
                setTimeout(() => show_mission(2), 2000);
            } else {
                q1_feedback.textContent = "Incorrect. Remember to start with 'It was... that...' and use the correct suspect.";
                q1_feedback.className = 'feedback-message error mt-2';
            }
        });

        // ==========================
        // 미션 2: 정답 검사
        // 요구: "It was ... that ...", 대상은 Lisa 혹은 the new cashier
        // ==========================
        q2_btn.addEventListener('click', () => {
            const user_answer = q2_input.value.trim().toLowerCase();
            const is_cashier = user_answer.includes('the new cashier') || user_answer.includes('lisa');
            if (user_answer.includes('it was') && is_cashier && user_answer.includes('that')) {
                q2_feedback.textContent = 'Correct! Another clue unlocked.';
                q2_feedback.className = 'feedback-message success mt-2';
                setTimeout(() => show_mission(3), 2000);
            } else {
                q2_feedback.textContent = 'Incorrect. Try again, detective.';
                q2_feedback.className = 'feedback-message error mt-2';
            }
        });

        // ==========================
        // 미션 3: 정답 검사 (관대함)
        // 요구: Lisa 관련, 위치/행동 단서 포함
        // ==========================
        q3_btn.addEventListener('click', () => {
            const user_answer = q3_input.value.trim().toLowerCase();
            const clue_keywords = [
                'behind the counter',
                'cleaning',
                "couldn't see",
                'could not see',
                'lying'
            ];
            const has_clue = clue_keywords.some((kw) => user_answer.includes(kw));
            if (user_answer.includes('lisa') && has_clue) {
                q3_feedback.textContent = "Excellent deduction! You're on the right track.";
                q3_feedback.className = 'feedback-message success mt-2';
                setTimeout(() => show_mission(4), 2000);
            } else {
                q3_feedback.textContent = 'Incorrect. Think about where Lisa said she was standing.';
                q3_feedback.className = 'feedback-message error mt-2';
            }
        });

        // ==========================
        // 미션 4: 최종 답안 검사
        // 요구: 범인은 Lisa, 이유는 키워드 포함 + "It was ... that ..."
        // ==========================
        q4_btn.addEventListener('click', () => {
            const suspect_value = q4_suspect.value;
            const reason_text = q4_reason.value.trim().toLowerCase();
            const correct_suspect = 'Lisa';
            const reason_keywords = [
                'lisa',
                'lying',
                'behind the counter',
                "couldn't see",
                'could not see',
                'to blame'
            ];

            const has_reason_keywords = reason_keywords.some((keyword) => reason_text.includes(keyword));

            if (suspect_value === correct_suspect && reason_text.includes('it was') && reason_text.includes('that') && has_reason_keywords) {
                q4_feedback.textContent = 'Case solved! The cookie thief is Lisa!';
                q4_feedback.className = 'feedback-message success mt-2';
                setTimeout(() => show_mission(5), 2000);
            } else {
                q4_feedback.textContent = 'Incorrect. Re-examine your clues, especially the biggest one!';
                q4_feedback.className = 'feedback-message error mt-2';
            }
        });

        // ==========================
        // 다시 시작 버튼 이벤트: 상태 및 입력 리셋
        // ==========================
        restart_btn.addEventListener('click', () => {
            // 입력값 초기화
            q1_input.value = '';
            q2_input.value = '';
            q3_input.value = '';
            q4_suspect.value = '';
            q4_reason.value = '';
            // 피드백 초기화
            q1_feedback.textContent = '';
            q2_feedback.textContent = '';
            q3_feedback.textContent = '';
            q4_feedback.textContent = '';
            // 인트로로 복귀
            show_mission(0);
        });

        // 초기 상태: 인트로 표시
        show_mission(0);
    </script>
</body>
</html>


